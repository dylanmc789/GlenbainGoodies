<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ page.title | default: "Glenbain Goodies" }}</title>

  <link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/images/gG.png">
  <link rel="apple-touch-icon" href="{{ site.baseurl }}/assets/images/gG.png">

  <!-- Google Tag Manager -->
  <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];
  w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
  var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
  j.async=true;
  j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
  f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T4FSHBD');
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
</head>
<body>

<noscript>
<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T4FSHBD"
height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>

<!-- Header with Navigation -->
<header class="header">
  <div class="header-inner">
    <a href="{{ site.baseurl }}/">
      <img src="{{ site.baseurl }}/assets/images/Glenbain+Goodies.webp" alt="Glenbain Goodies" class="logo">
    </a>

    <!-- Hamburger Button -->
    <button class="nav-toggle" aria-label="Toggle navigation">
      <span></span><span></span><span></span>
    </button>

    <!-- Navigation -->
    <nav class="nav-bar">
      <a href="{{ site.baseurl }}/appetizers">Appetizers</a>
      <a href="{{ site.baseurl }}/beverages">Beverages</a>
      <a href="{{ site.baseurl }}/brunch-breads">Brunch &amp; Breads</a>
      <a href="{{ site.baseurl }}/canning">Canning</a>
      <a href="{{ site.baseurl }}/casseroles">Casseroles</a>
      <a href="{{ site.baseurl }}/cookies">Cookies</a>
      <a href="{{ site.baseurl }}/desserts">Desserts</a>
      <a href="{{ site.baseurl }}/mains">Mains</a>
      <a href="{{ site.baseurl }}/soups-salads-sides">Soups, Salads &amp; Sides</a>
      <a href="{{ site.baseurl }}/add-recipe.html" class="nav-primary">Add Recipe</a>
    </nav>
  </div>
</header>

<main>
  {{ content }}
</main>

<!-- Footer -->
<footer class="site-footer">
  <p>Â© Glenbain Goodies. All Rights Reserved.</p>
</footer>

<script>
const toggle = document.querySelector('.nav-toggle');
const nav = document.querySelector('.nav-bar');
const links = nav.querySelectorAll('a');

toggle.addEventListener('click', () => {
  toggle.classList.toggle('active');
  nav.classList.toggle('active');
});

// Close menu when a link is clicked
links.forEach(link => {
  link.addEventListener('click', () => {
    toggle.classList.remove('active');
    nav.classList.remove('active');
  });
});
</script>
<script>
const searchInput = document.querySelector(".search-input");
const resultsDiv = document.getElementById("search-results");
let searchIndex = [];

// Fetch search.json
fetch("/search.json")
  .then(res => res.json())
  .then(data => { searchIndex = data; });

searchInput.addEventListener("input", () => {
  const query = searchInput.value.toLowerCase().trim();
  resultsDiv.innerHTML = "";

  if (!query) return;

  const matches = searchIndex.filter(item =>
    item.title.toLowerCase().includes(query) ||
    item.content.toLowerCase().includes(query)
  );

  if (matches.length === 0) {
    resultsDiv.innerHTML = "<p>No results found.</p>";
    return;
  }

  const html = matches.map(item =>
    `<a href="${item.url}" class="search-result">
       <strong>${item.title}</strong> <em>(${item.category})</em>
     </a>`
  ).join("<br>");

  resultsDiv.innerHTML = html;
});
</script>

</body>
</html>
